<div class="row">
  <div class="col-lg-12 mb-4">
    <h4>{{ 'labels_and_placeholders.tree_node_title' | translate}}</h4>
    <div class="row search-block">
      <div class="col-lg-9">
        <input type="text" class="form-control mb-2" placeholder="{{ 'labels_and_placeholders.placeholder_for_tree_search' | translate}}" #searchKey (input)="search(searchKey.value)">
        <i class="material-icons error_outline" matTooltip="{{ 'labels_and_placeholders.tree_node_search_helper' | translate}}"
        matTooltipPosition="above" matTooltipClass="tooltippp" >error_outline</i>
      </div>
      <div class="col-lg-3">
        <button mat-button class="btn btn-dark buttons" (click)="search(searchKey.value)"><mat-icon class="material-icons">search</mat-icon>Suchen</button>
      </div>
      <div class="col-lg-12 help-text" *ngIf="!dataSource.data.length">
        <i class="material-icons">warning</i>
        <span>Nothing found, please, change your search request!</span>        
      </div>
    </div>
  </div>
  <div class="col-lg-12 custom">
    <form>
      <div class="row my-4">
        <div class="col-lg-12">
          <mat-tree  [dataSource]="dataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle [ngClass]="{selected : node == choosenNode }">
              <li>
                <div class="mat-tree-node highlight-element-selector" (click)="choosenNode = node">{{node.treeNodeDescription}}</div>
              </li>
            </mat-tree-node>
            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild" >
              <li>
                <div class="card" [ngClass]="{selected : node == choosenNode }">
                  <div class="card-header mat-tree-node highlight-element-selector" (click)="choosenNode = node">
                    <button mat-icon-button matTreeNodeToggle type="button"
                      [attr.aria-label]="'toggle ' + node.treeNodeDescription">
                      <mat-icon class="mat-icon-rtl-mirror">
                        {{treeControl.isExpanded(node) ? 'indeterminate_check_box' : 'add_box'}}
                      </mat-icon>
                    </button>
                    {{node.treeNodeDescription}}
                  </div>
                </div>
                <ul>
                  <div *ngIf="treeControl.isExpanded(node)">
                    <ng-container matTreeNodeOutlet></ng-container>
                  </div>
                </ul>
              </li>
            </mat-nested-tree-node>
          </mat-tree>
        </div>
      </div>
    </form>
  </div>
  
  <div class="col-lg-12 buttons mt-4">
      <button mat-button type="button" class="btn btn-light mr-2" (click)="choosenNode = null ; close() "><mat-icon class="material-icons">close</mat-icon>{{ 'button_texts.cancel_button' | translate}} </button>
      <button mat-button type="button" class="btn btn-primary" (click)="close()"><mat-icon class="material-icons ">check</mat-icon>{{ 'button_texts.ok_button' | translate}} </button>
  </div>
</div>